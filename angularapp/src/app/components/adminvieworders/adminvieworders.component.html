<mat-card class="container">
    <h2>Requested Orders</h2>
  
    <!-- Top Filters -->
    <div class="filters">
      <mat-form-field appearance="outline">
        <mat-label>Search Orders</mat-label>
        <input matInput (keyup)="applyFilter($event)" placeholder="Search by username or OrderId">
      </mat-form-field>
  
      <mat-form-field appearance="outline">
        <mat-label>Filter by Status</mat-label>
        <mat-select (selectionChange)="filterByStatus($event.value)">
          <mat-option value="">All</mat-option>
          <mat-option *ngFor="let status of statusOptions" [value]="status">{{ status }}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  
    <!-- Table -->
    <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">
         <!-- S.No Column -->
      <ng-container matColumnDef="sno">
        <th mat-header-cell *matHeaderCellDef>S.No</th>
        <td mat-cell *matCellDef="let order; let i = index">{{ i + 1 }}</td>
      </ng-container>
  
      <!-- Order ID Column -->
      <ng-container matColumnDef="orderId">
        <th mat-header-cell *matHeaderCellDef>Order ID</th>
        <td mat-cell *matCellDef="let order">{{ order.orderId }}</td>
      </ng-container>
  
      <!-- Username Column -->
      <ng-container matColumnDef="username">
        <th mat-header-cell *matHeaderCellDef>Username</th>
        <td mat-cell *matCellDef="let order">{{ order.user.username }}</td>
      </ng-container>
  
      <!-- Product Name Column -->
      <ng-container matColumnDef="productName">
        <th mat-header-cell *matHeaderCellDef>Product Name</th>
        <td mat-cell *matCellDef="let order">
          <div *ngFor="let p of order.product">{{ p.name }}</div>
        </td>
      </ng-container>
  
      <!-- Price Column -->
      <ng-container matColumnDef="price">
        <th mat-header-cell *matHeaderCellDef>Price</th>
        <td mat-cell *matCellDef="let order">
          <div *ngFor="let p of order.product">{{ p.price | currency:'INR' }}</div>
        </td>
      </ng-container>
  
      <!-- Shipping Address Column -->
      <ng-container matColumnDef="shippingAddress">
        <th mat-header-cell *matHeaderCellDef>Shipping Address</th>
        <td mat-cell *matCellDef="let order">{{ order.shippingAddress }}</td>
      </ng-container>
  
      <!-- Total Amount Column -->
      <ng-container matColumnDef="totalAmount">
        <th mat-header-cell *matHeaderCellDef>Total Amount</th>
        <td mat-cell *matCellDef="let order">{{ order.totalAmount | currency:'INR' }}</td>
      </ng-container>
  
      <!-- Quantity Column -->
      <ng-container matColumnDef="quantity">
        <th mat-header-cell *matHeaderCellDef>Quantity</th>
        <td mat-cell *matCellDef="let order">{{ order.quantity }}</td>
      </ng-container>
  
      <!-- Status Column -->
      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef>Status</th>
        <td mat-cell *matCellDef="let order">
          <mat-form-field appearance="fill">
            <mat-select [(value)]="order.status" (selectionChange)="updateStatus(order)">
              <mat-option *ngFor="let status of statusOptions" [value]="status">{{ status }}</mat-option>
            </mat-select>
          </mat-form-field>
        </td>
      </ng-container>
  
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  
    <!-- Paginator -->
    <mat-paginator [pageSizeOptions]="[10, 20, 100]" showFirstLastButtons></mat-paginator>
  
    <ng-template #noOrders>
      <p>Oops! No Orders found...</p>
    </ng-template>
  </mat-card>